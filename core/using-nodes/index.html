<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Using Your Nodes - DETERLab Docs</title>
  

  <link rel="shortcut icon" href="../../favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/extra.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Using Your Nodes";
    var mkdocs_page_input_path = "core/using-nodes.md";
    var mkdocs_page_url = "/core/using-nodes/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">
<!--
	<header>
		<h1 class="logo"><a href="/">DETERLab Docs</a></h1>
	</header>
-->
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon"><img class="logo" style="float:left" src="/img/doc-logo.png"/> <span class="title">DETERLab Docs</span></a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Welcome to the DETERLab Documentation</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../glossary/">Glossary</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>DETERLab Core</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../core-quickstart/">Core Quickstart</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../core-guide/">Core Guide</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../sample-topologies/">Sample Topologies</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Using Your Nodes</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#know-your-deter-servers">Know your DETER servers</a></li>
                
            
                <li class="toctree-l3"><a href="#hostnames-for-your-nodes">Hostnames for your nodes</a></li>
                
            
                <li class="toctree-l3"><a href="#logging-into-your-node">Logging into your Node</a></li>
                
            
                <li class="toctree-l3"><a href="#how-do-i-install-software-onto-my-node">How do I install software onto my node?</a></li>
                
            
                <li class="toctree-l3"><a href="#how-do-i-copy-files-onto-my-node">How do I copy files onto my node?</a></li>
                
            
                <li class="toctree-l3"><a href="#i-need-root-access">I need root access!</a></li>
                
            
                <li class="toctree-l3"><a href="#my-node-is-wedged">My node is wedged!</a></li>
                
            
                <li class="toctree-l3"><a href="#i-want-to-load-a-fresh-operating-system-on-my-node">I want to load a fresh operating system on my node</a></li>
                
            
                <li class="toctree-l3"><a href="#i-only-want-certain-types-of-nodes-for-my-experiment">I only want certain types of nodes for my experiment</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../generating-traffic/">Generating Traffic</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../link-delays/">End Node Traffic Shaping</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../sharing/">Using Shared Materials</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Core Reference</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../deterlab-commands/">DETERLab Commands</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ns-commands/">NS Commands Extensions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../swapping/">Understanding Swapping (Node Use Policies)</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../DETERSSH/">Accessing testbeds using SSH</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../node-types/">DETERLab Node Types</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../serial-console/">Using the Serial Console</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../dell-serial-console/">Dell Serial Console</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../os-images/">OS Images</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../custom-images/">Creating Custom Images</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../windows/">Windows XP</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../legacy-tools/">Legacy Tools</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Orchestrator</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/orchestrator-quickstart/">Orchestrator Quickstart</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/orchestrator-guide/">Orchestrator Guide</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/orchestrator-case-studies/">Orchestrator Case Studies</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/simple-client-server/">Simple Client Server Case Study</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/scaled-client-server/">Scaled Client Server Case Study</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/feedback/">Feedback Case Study</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/writing-agents/">Writing Your Own MAGI Agents</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/agent-configuration/">Configuring a MAGI Agent at Runtime</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/orchestrator-reference/">Orchestrator Reference</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/system-files/">MAGI System Files</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/agent-library/">MAGI Agent Library</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../orchestrator/magi-tools/">MAGI Tools</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Containers</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../containers/containers-quickstart/">Containers Quickstart</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../containers/containers-guide/">Containers Guide</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../containers/containers-reference/">Containers Reference</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Other Features</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../federation/">Federation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../abac/">ABAC</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Miscellaneous</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../ISIUCB/">DETERLab Rooms</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>About</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/release-notes/">Release Notes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/contributing/">Contributing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/license/">License</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">DETERLab Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <!--
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>DETERLab Core &raquo;</li>
        
      
    
    <li>Using Your Nodes</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
        -->
          <div role="navigation" aria-label="breadcrumbs navigation">
            <!--
            
              

                
                  <h1>DETERLab Core &raquo;</h1>
                
              
            
          -->
            <h1>Using Your Nodes</h1>
          </div>
          <div role="main">
            <div class="section">
              
                <h2 id="know-your-deter-servers">Know your DETER servers<a class="headerlink" href="#know-your-deter-servers" title="Permanent link"></a></h2>
<p>Here are the most important things to know.</p>
<ul>
<li><code>www.isi.deterlab.net</code> is the primary web interface for the testbed.</li>
<li><code>users.isi.deterlab.net</code> is the host through which the testbed nodes are accessed and it is primary file server.</li>
<li><code>scratch</code> is the local package mirror for CentOS, Ubuntu, and FreeBSD.</li>
</ul>
<h2 id="hostnames-for-your-nodes">Hostnames for your nodes<a class="headerlink" href="#hostnames-for-your-nodes" title="Permanent link"></a></h2>
<p>We set up names for your nodes in DNS and <code>/etc/hosts</code> files for use on the nodes in the experiment. Since our nodes have multiple interfaces (the control network, and, depending on the experiment, possibly several experimental interfaces) determining which name refers to which interface can be somewhat confusing. The rules below should help you figure this out.</p>
<ul>
<li><strong>From users.isi.deterlab.net</strong> - We set up names in the form of <code>node.expt.proj.isi.deterlab.net</code> in DNS, so that they are visible anywhere on the Internet. This name always refers to the node's control network interface, which is the only one reachable from <code>users.isi.deterlab.net</code>. You can use <code>node.expt.proj</code> as a shorthand.</li>
<li><strong>On the nodes themselves</strong> - There are three basic ways to refer to the interfaces of a node. The first is stored in DNS, and the second two are stored on the node in the <code>/etc/hosts</code> file.<ol>
<li><em>Fully-qualified hostnames</em> - These names are the same ones visible from the outside world, and referred to by attaching the full domain name: ie. <code>node.expt.proj.isi.deterlab.net</code>. (Note that, since we put <em>.isi.deterlab.net</em> in the nodes' domain search paths, you can use <code>node.expt.proj</code> as a shorthand.) This name always refers to the control network.</li>
<li><em>node-link form</em> - You can refer to an individual experimental interface by suffixing it with the name of the link or LAN (as defined in your NS file) that it is a member of. For example, <code>nodeA-link0</code> or <code>server-serverLAN</code>. This is the preferred way to refer to experimental interfaces, since it uniquely and unambiguously identifies an interface.</li>
<li><em>Short form</em> - If a node is directly connected to the node you're on, you can refer to that node simply with its name (eg. <code>nodeA</code>.) Note that this differs from the fully- qualified name in that no domain is given. We also create short names for nodes you are not directly connected to. However, if two nodes are connected with more than one interface, or there is more than one route between them, there is no guarantee that the short name has been associated with the one is on the best (ie. shortest or highest bandwidth) path - so, if there is ambiguity, we strongly suggest that you use the <em>node-link</em> form.</li>
</ol>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is a bad idea to pick virtual node names in your topology that clash with the physical node names in the testbed, such as "pc45".</p>
</div>
<h2 id="logging-into-your-node">Logging into your Node<a class="headerlink" href="#logging-into-your-node" title="Permanent link"></a></h2>
<p>By the time you receive the email message listing your nodes, the DETER configuration system will have ensured that your nodes are fully configured and ready to use. If you have selected one of the DETER-supported operating system images <a href="/core/os-images/">see supported images</a>), this configuration process includes:
    * loading fresh disk images so that each node is in a known clean state;
    * rebooting each node so that it is running the OS specified in the NS script;
    * configuring each of the network interfaces so that each one is "up" and talking to its virtual LAN (VLAN);
    * creating user accounts for each of the project members;
    * mounting the projects NFS directory in /proj so that project files are easily shared amongst all the nodes in the experiment;
    * creating a /etc/hosts file on each node so that you may refer to the experimental interfaces of other nodes by name instead of IP number;
    * configuring all of the delay parameters;
    * configuring the serial console lines so that project members may access the console ports from users.isi.deterlab.net.</p>
<p>As this point you may log into any of the nodes in your experiment. You will need to use <a href="/core/DETERSSH/">Secure Shell (ssh)</a> to log into <code>users.isi.deterlab.net</code>
Your login name and password will be the same as your Web Interface login and password.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although you can log into the web interface using your email address instead of your login name, you must use your login name when logging into <code>users.isi.deterlab.net</code>.</p>
</div>
<p>Once logged into users you can then SSH to your nodes.  You should use the `qualified name' from the nodes mapping table so that you do not form dependencies on any particular physical node.  For more information on using SSH with DETER, please take a look at the <a href="/core/DETERSSH/">DETER SSH</a> wiki page.</p>
<h2 id="how-do-i-install-software-onto-my-node">How do I install software onto my node?<a class="headerlink" href="#how-do-i-install-software-onto-my-node" title="Permanent link"></a></h2>
<p>Each <a href="/core/os-images/">supported operating system</a> has packages mirrored on a host called scratch and each operating system is configured to use this system to fetch packages from.  Information for specific operating systems is documented there.</p>
<h2 id="how-do-i-copy-files-onto-my-node">How do I copy files onto my node?<a class="headerlink" href="#how-do-i-copy-files-onto-my-node" title="Permanent link"></a></h2>
<p>Your home directory on users is automatically mounted via NFS on every node in your experiment.  As are your project directory in <code>/proj</code> and a special filesystem called <code>/share</code>.</p>
<h2 id="i-need-root-access">I need <strong>root</strong> access!<a class="headerlink" href="#i-need-root-access" title="Permanent link"></a></h2>
<p>If you need to customize the configuration, or perhaps reboot nodes, you can use the "sudo" command, located in <code>/usr/local/bin</code> on FreeBSD and <code>/usr/bin</code> Linux. All users are added to the Administrators group on <a href="/core/windows/">Windows XP</a> nodes. Our policy is very liberal; you can customize the configuration in any way you like, provided it does not interfere with the operation of the testbed. As as example, to reboot a node that is running FreeBSD:</p>
<pre><code>/usr/local/bin/sudo reboot
</code></pre>
<p>Also, every testbed node has an automatically generated root password.  Simply click on a node in the "Reserved Nodes" for your experiment and look at the <code>root_password</code> attribute.</p>
<h2 id="can-i-access-the-nodes-console"><a name="SerialConsole"></a>Can I access the nodes console?<a class="headerlink" href="#can-i-access-the-nodes-console" title="Permanent link"></a></h2>
<p>Yes. Each of the PCs has its own serial console line connected to a <a href="/core/dell-serial-console/">serial server</a>.  You can connect to a nodes serial console through the <code>users</code> machine, using our <code>console</code> program located in '/usr/testbed/bin'. For example, to connect over serial line to "pc001" in your experiment, SSH into <code>users.isi.deterlab.net</code>, and then type <code>console pc001</code> at the Unix prompt. You may then interact with the serial console (hit "enter" to elicit output from the target machine).</p>
<p>To exit the console program, type <code>Ctrl-]</code>; it's just a telnet session.</p>
<p>In any case, all console output from each node is saved so that you may look at it it later. For each node, the console log is stored as <code>/var/log/tiplogs/pcXXX.run</code>. This <em>run</em> file is created when nodes are first allocated to an experiment, and the Unix permissions of the run files permit only members of the project to view them. When the nodes are deallocated, the run files are cleared, so if you want to save them, you must do so before terminating the experiment.</p>
<p>In addition, you can view the console logs from the web interface, on the Show Experiment page. Of course, you may not interact with the console, but you can at least view the current log.</p>
<p>Escape codes for Dell serial consoles are documented <a href="/core/dell-serial-console/">here</a>.</p>
<h2 id="my-node-is-wedged">My node is wedged!<a class="headerlink" href="#my-node-is-wedged" title="Permanent link"></a></h2>
<p>Power cycling a node is easy since every node on the testbed is connected to a power controller.  If you need to power cycle a node, log on to users.isi.deterlab.net and use the "node_reboot" command:</p>
<pre><code>node_reboot &lt;node&gt; [node ... ]
</code></pre>
<p>where <code>node</code> is the physical name, as listed in the node mapping table. You may provide more than one node on the command line. Be aware that you may power cycle only nodes in projects that you are member of. Also, <code>node_reboot</code> does its very best to perform a clean reboot before resorting to cycling the power to the node. This is to prevent the damage that can occur from constant power cycling over a long period of time. For this reason, <code>node_reboot</code> may delay a minute or two if it detects that the machine is still responsive to network transmission. In any event, please try to reboot your nodes first (see above).
You may also reboot all the nodes in an experiment by using the <code>-e</code> option to specify the project and experiment names. For example:</p>
<pre><code>node_reboot -e testbed,multicast
</code></pre>
<p>will reboot all of the nodes reserved in the "multicast" experiment in the "testbed" project. This option is provided as a shorthand method for rebooting large groups of nodes.</p>
<h2 id="i-want-to-load-a-fresh-operating-system-on-my-node">I want to load a fresh operating system on my node<a class="headerlink" href="#i-want-to-load-a-fresh-operating-system-on-my-node" title="Permanent link"></a></h2>
<p>Scrogging your disk is certainly not as common, but it does happen. You can either swap your experiment out and then back in (which will allocate another group of nodes), or if you prefer you can reload the disk image yourself. You will of course lose anything you have stored on that disk; it is a good idea to store only data that can be easily recreated, or else store it in your project directory in <code>/proj</code>. </p>
<p>Reloading your disk with a fresh copy of an image is easy, and requires no intervention by DETER staff:</p>
<pre><code>os_load [-i ImageName] [-p Project] &lt;node&gt; [node ... ]
</code></pre>
<p>If you do not specify an image name, the default image for that node type will be loaded (typically Ubuntu1004-STD).  For testbed wide images, you do not have to specify a project.  The os_load command will wait (not exit) until the nodes have been reloaded, so that you do not need to check the console lines of each node to determine when the load is done.</p>
<p>For example, to load the image 'testpc167' which is in the project 'DeterTest' onto pc167, we type:</p>
<pre><code>users &gt; os_load -i testpc167 -p DeterTest pc167
osload (pc167): Changing default OS to [OS 998: DeterTest,testpc167]
osload: Updating image signature.
Setting up reload for pc167 (mode: Frisbee)
osload: Issuing reboot for pc167 and then waiting ...
reboot (pc167): Attempting to reboot ...
reboot (pc167): Successful!
reboot: Done. There were 0 failures.
reboot (pc167): child returned 0 status.
osload (pc167): still waiting; it has been 1 minute(s)
osload (pc167): still waiting; it has been 2 minute(s)
osload (pc167): still waiting; it has been 3 minute(s)
osload (pc167): still waiting; it has been 4 minute(s)
osload: Done! There were 0 failures.
users &gt;
</code></pre>
<h2 id="i-only-want-certain-types-of-nodes-for-my-experiment">I only want certain types of nodes for my experiment<a class="headerlink" href="#i-only-want-certain-types-of-nodes-for-my-experiment" title="Permanent link"></a></h2>
<p>The NS command <strong>tb-set-hardware</strong> only lets you pick one type of hardware.  If you are fine with a couple of different kinds of hardware, say you just want nodes that are at ISI part of the testbed, you can define a virtual node type in your NS file.  For more information on virtual types, please refer to the <a href="/core/ns-commands/#virtual-type-commands">Virtual Type Commands</a> section of the NS command reference.  Here is a quick example:</p>
<pre><code>tb-make-soft-vtype ISI {pc2133 pc3000 pc3060 pc3100} 
tb-make-soft-vtype UCB {bpc2133 bpc3000 bpc3060}

tb-set-hardware $atISI ISI
tb-set-hardware $atUCB UCB
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../generating-traffic/" class="btn btn-neutral float-right" title="Generating Traffic"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../sample-topologies/" class="btn btn-neutral" title="Sample Topologies"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2016 <a href="https://www.deter-project.org/">DETER Project</a>.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../sample-topologies/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../generating-traffic/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
