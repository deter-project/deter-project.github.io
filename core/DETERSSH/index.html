<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Advanced Notes on Accessing Testbeds using SSH - DeterLab Documentation (DEPRECATED)</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Advanced Notes on Accessing Testbeds using SSH";
        var mkdocs_page_input_path = "core/DETERSSH.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
    <a href="" class="icon">
      <!--REPLACE LOGO FILE HERE -->
      <img class="logo" style="float:left" src="img/doc-logo.png"/> 
      <span class="title">DeterLab Documentation (DEPRECATED)</span></a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search documentation" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Welcome to the DETERLab Documentation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../Glossary/">Glossary</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../quickstart/">Quickstart</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Opening Account</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../support/research/">Research users</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../support/class/">Class users</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Running Experiments</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../topology/">Create a topology</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../create/">Create an experiment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../swapin/">Swap in an experiment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../interact/">Use your nodes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../swapout/">Swap out or terminate</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../user-guidelines/">User DOs and DON'Ts</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced Features</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../containers/containers-quickstart/">Containers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../dsc/">Nework Emulation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../risky-experiment/">Risky Experiments</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://binary.deterlab.net/docs">Binary Analysis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../competitions/">Competitions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../orchestrator/">Orchestrator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../dash/">Human user emulation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Sharing</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../sample-topologies/">Sample Topologies</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sharing/">Shared Materials</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Deterlab for Classes</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../education/">Education Materials Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../education/guidelines-for-teachers/">Guidelines for Teachers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../education/class-support/">Class Support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../education/course-setup/">Course Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../education/good-teaching-practices/">Good Teaching Practices</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../education/connect-with-teachers/">Connect With Other Teachers</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../education/guidelines-for-students/">Guidelines for Students</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../education/public-materials/">Public Materials</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../deterlab-commands/">DETERLab commands</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ns-commands/">NS commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Support</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../support/migration/">Migration Instructions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../support/getting-help/">Getting Help</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../support/faqs/">FAQs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../support/usage-policy/">Usage Policy</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">DeterLab Documentation (DEPRECATED)</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">Advanced Notes on Accessing Testbeds using SSH</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="advanced-notes-on-accessing-testbeds-using-ssh">Advanced Notes on Accessing Testbeds using SSH<a class="headerlink" href="#advanced-notes-on-accessing-testbeds-using-ssh" title="Permanent link">ÔÉÅ</a></h1>
<p>Please first see  <a href="../interact/">the guide on interacting with your nodes</a>.  The rest of the notes on this page relate to specific operating systems and specific, advanced, uses of SSH.</p>
<p>Each node on the testbed is reachable via <a href="http://en.wikipedia.org/wiki/Secure_Shell">SSH</a>.  DETERLab nodes are not accessible directly from the internet.  In order to log into your nodes, you must first log into '''users.deterlab.net''' using your DETER username (not your email address) and password (or your SSH public key).  From users you can log into your nodes.  To save on connections, you might want to look into using <a href="http://en.wikipedia.org/wiki/GNU_Screen">GNU screen</a> on <code>users</code>.  Also refer to the <a href="#tips-and-tricks">Tips and Tricks</a> section below for ways to make accessing DETER easier.</p>
<h2 id="uploading-files-to-deter">Uploading files to DETER<a class="headerlink" href="#uploading-files-to-deter" title="Permanent link">ÔÉÅ</a></h2>
<p>You can upload files to users.deterlab.net via <a href="http://en.wikipedia.org/wiki/Secure_Shell#File_transfer_protocols_using_SSH">SCP</a>  or <a href="http://en.wikipedia.org/wiki/Secure_Shell#File_transfer_protocols_using_SSH">SFTP</a>.  Files in your home directory and in your project directory will be made available to you on all of your testbed nodes via <a href="http://en.wikipedia.org/wiki/Network_File_System_%28protocol%29">NFS</a>. Linux directions are given in <a href="../interact/">the guide on interacting with your nodes</a>.</p>
<h2 id="an-example-session-with-windows-and-putty">An Example Session with Windows and Putty<a class="headerlink" href="#an-example-session-with-windows-and-putty" title="Permanent link">ÔÉÅ</a></h2>
<p><a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">Putty</a> is a free, lightweight SSH client for Windows.  Here is an example session in which I connect to my experimental node "node0" in my experiment "jjh-ubuntu1004" in the project "DeterTest".</p>
<p>First we connect to '''users.deterlab.net''':</p>
<p><img alt="" src="../../img/putty_session_one.png" title="Screenshot of default Putty session." /></p>
<p>We then enter in our just our username and password (the same password as the DETERLab web interface).  Trying to use your email address or something like <em>jjh@users.deterlab.net</em> will '''not''' work:</p>
<p><img alt="" src="../../img/putty_session_two.png" /></p>
<p>Now we have successfully logged into users.deterlab.net:</p>
<p><img alt="" src="../../img/putty_session_three.png" /></p>
<p>From users, we now ssh into our experimental node, "node0.jjh-ubuntu.detertest":</p>
<p><img alt="" src="../../img/putty_session_four.png" /></p>
<h3 id="ssh-port-forwarding">SSH port forwarding<a class="headerlink" href="#ssh-port-forwarding" title="Permanent link">ÔÉÅ</a></h3>
<p>If you are, for example, running an internal web server on one of your DETER nodes, you can access it via SSH through users.  You can find the name of the node in MyDeterlab view for your experiment (see the red oval in the picture below).</p>
<p><img alt="" src="../../img/nodes.png" /></p>
<p>For example to redirect port 80 on node A (pc176) to your local machine on port 8080 you would do:</p>
<pre><code>    ssh -L 8080:pc176:80 YourUsername@users.deterlab.net
</code></pre>
<p>Once logged in, you should be able to access the web server on your DETER node by going to http://localhost:8080.  For more information on port forwarding with SSH, please refer to the SSH man page.</p>
<h3 id="ssh-port-forwarding-with-putty">SSH port forwarding with Putty<a class="headerlink" href="#ssh-port-forwarding-with-putty" title="Permanent link">ÔÉÅ</a></h3>
<p>To use putty for port forwarding, configure putty to open a connection to <code>users.deterlab.net</code></p>
<p><img alt="" src="../../img/putty1.png" /></p>
<p>before you make that connection, set up the tunneling parameters.  This example forwards local port 12345 to a remode desktop protocol server (port 3389) on a testbed node.  select the <code>Tunnels</code> menu from under the <code>SSH</code> choice in the <code>Connection</code> menu on the left hand side.  Add a forwarded port using the <code>Local</code> type, a local port number (12345 in the image) and the DETER hostname and port in the <code>Destination</code> field.  In the example we are forwarding the connection to port 3389 (the remote desktop protocol) on <code>pc102</code>. </p>
<p><img alt="" src="../../img/putty2.png" /></p>
<p>Be sure to press <code>Add</code> to add the port.  The putty window will look like this:</p>
<p><img alt="" src="../../img/putty3.png" /></p>
<p>Now open that connection.  You will see a login prompt, and you should log in to users.</p>
<p><img alt="" src="../../img/login.png" /></p>
<p>Now you should be able to point your local remote desktop viewer to localhost port 12345 and see the login screen of pc102.  If the node is a Windows node, you will see something like this:</p>
<p><img alt="" src="../../img/tunnel.png" /></p>
<p>Be sure that your local machine does not firewall the local port 12345.  Replace <code>pc102</code> with a node in your experiment and the forwarded port with the port your service uses.</p>
<h3 id="uploading-your-ssh-key-from-os-x">Uploading your SSH key from OS X <a name="OSX"></a><a class="headerlink" href="#uploading-your-ssh-key-from-os-x" title="Permanent link">ÔÉÅ</a></h3>
<p>The Upload File dialog in Macintosh OS X does not show hidden directories by default.  This creates and extra hassle when uploading SSH public keys from an OS X machine.  </p>
<p>In the "Upload File" dialog, use the shortcut '''Shift-Command-G''' and type in "~/.ssh" to navigate to the contents of your .ssh directory.</p>
<p><img alt="" src="../../img/os_x_key_upload_one.png" /></p>
<p>Then you will be presented with the contents of your .ssh directory and will be able to upload your id_rsa.pub file to DETER:</p>
<p><img alt="" src="../../img/os_x_key_upload_two.png" /></p>
<h3 id="openssh-configuration-for-directly-logging-into-testbed-nodes">OpenSSH Configuration for Directly Logging into testbed nodes<a class="headerlink" href="#openssh-configuration-for-directly-logging-into-testbed-nodes" title="Permanent link">ÔÉÅ</a></h3>
<p>These configuration tweaks should work for any operating system that runs OpenSSH (Linux, BSD, and OS X typically use OpenSSH as the default SSH client).</p>
<p>It is possible to log directly into testbed nodes with a little SSH configuration tweaking.  Adding the following statement to '''~/.ssh/config''' will allow you to skip logging into users in order to access a particular testbed node.  Change MyProject to the name of your project.</p>
<pre><code>    Host pc*.isi.deterlab.net
        ProxyCommand ssh users.deterlab.net nc %h %p
        StrictHostKeyChecking no

    Host *.MyProject.isi.deterlab.net
        ProxyCommand ssh users.deterlab.net nc %h %p
        StrictHostKeyChecking no
</code></pre>
<p>With this configuration change and a proper SSH key setup, you will be able to directly log into nodes in your experiment.</p>
<p>You will now be able to log into nodes in your experiment using either the actual node name, e.g. pc025.isi.deterlab.net, or YourNode.YourExperiment.YourProject.isi.deterlab.net.</p>
<p>For example:</p>
<pre><code>    jjhs-mac-mini:~ jjh$ ssh node0.jjh-ubuntu1004.DeterTest.isi.deterlab.net
    Warning: Permanently added 'node0.jjh-ubuntu1004.detertest.isi.deterlab.net' (RSA) to the list of known hosts.
    Linux node0.jjh-ubuntu1004.detertest.isi.deterlab.net 2.6.32-25-generic-pae #45-Ubuntu SMP Sat Oct 16 21:01:33 UTC 2010 i686 GNU/Linux
    Ubuntu 10.04.1 LTS

    Welcome to Ubuntu!
     * Documentation:  https://help.ubuntu.com/

      System information as of Wed Nov 10 20:41:19 PST 2010

      System load:  0.0                Processes:           116
      Usage of /:   12.3% of 14.67GB   Users logged in:     0
      Memory usage: 1%                 IP address for eth1: 192.168.1.26
      Swap usage:   0%

      Graph this data and manage this system at https://landscape.canonical.com/

    4 packages can be updated.
    2 updates are security updates.

    Last login: Wed Nov 10 20:13:15 2010 from users.deterlab.net
    node0:~&gt; 
</code></pre>
<h3 id="accelerating-multiple-connections-using-openssh-connection-multplexing">Accelerating Multiple Connections using OpenSSH Connection Multplexing<a class="headerlink" href="#accelerating-multiple-connections-using-openssh-connection-multplexing" title="Permanent link">ÔÉÅ</a></h3>
<p>You can log in multiple times using the same SSH connection.  This dramatically speeds up creating new connections.  To enable SSH connection multiplexing, add the following lines to ~/.ssh/config.  If you are on a multiuser machine, you may want to store the control socket someplace other than /tmp.</p>
<pre><code>    Host users.deterlab.net
        ControlMaster auto
        ControlPath /tmp/%r@%h:%p
</code></pre>
<p>To verify that it is working, you can use the '''-v''' option:</p>
<pre><code>    jjhs-mac-mini:~ jjh$ ssh -v pc026.isi.deterlab.net
    OpenSSH_5.2p1, OpenSSL 0.9.8l 5 Nov 2009
    debug1: Reading configuration data /Users/jjh/.ssh/config
    debug1: Applying options for *isi.deterlab.net
    debug1: Applying options for pc*.isi.deterlab.net
    debug1: Applying options for *
    debug1: Reading configuration data /etc/ssh_config
    debug1: auto-mux: Trying existing master
    Last login: Wed Nov 10 20:51:43 2010 from users.deterlab.net
    node0:~&gt; 
</code></pre>
<p>If you try to close your master connection while other connections are active, the connection will stay running until the other sessions end.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2018 <a href="https://www.deter-project.org/">DETER Project</a>.</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
  <script>var base_url = '../..';</script>
  <script src="../../js/theme.js"></script>
    <script src="../../search/main.js"></script>
  <!-- this makes the active part of the navigation sidebar scroll to top -->
<script type="text/javascript">
$(document).ready(function () {

  if ($("a").hasClass("current")) {
    var container = $("nav"),
    scrollTo = $("a.current");

    container.scrollTop(
    scrollTo.offset().top - container.offset().top + container.scrollTop() - 92
    );
    
    }
});
</script>

</body>
</html>
