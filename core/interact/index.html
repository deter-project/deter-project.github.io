<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Use your nodes - DETERLab Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../css/extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Use your nodes";
    var mkdocs_page_input_path = "core/interact.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
    <a href="" class="icon">
      <!--REPLACE LOGO FILE HERE -->
      <img class="logo" style="float:left" src="img/doc-logo.png"/> 
      <span class="title">DETERLab Documentation</span></a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search documentation" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Welcome to the DETERLab Documentation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../Glossary/">Glossary</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../quickstart/">Quickstart</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Opening Account</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/research/">Research users</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/class/">Class users</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Running Experiments</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../topology/">Create a topology</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../create/">Create an experiment</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../swapin/">Swap in an experiment</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Use your nodes</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#modes-of-use">Modes of use</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#experiment-realization">Experiment Realization</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#access-your-nodes">Access your nodes</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#shared-filesystem">Shared Filesystem</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#transfer-files">Transfer Files</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#from-your-device-to-deterlab-home-directory">From your device to DETERLab home directory</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#from-deterlab-home-directory-to-your-device">From DETERLab home directory to your device</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#from-your-device-to-deterlab-local-folder-on-experimental-node">From your device to DETERLab local folder on experimental node</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#from-deterlab-local-folder-on-experimental-node-to-your-device">From DETERLab local folder on experimental node to your device</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#mount-more-disk-space">Mount More Disk Space</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#install-software">Install Software</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#generate-traffic">Generate Traffic</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#collect-statistics">Collect Statistics</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#modify-experiment">Modify Experiment</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../swapout/">Swap out or terminate</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../user-guidelines/">User DOs and DON'Ts</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Advanced Features</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../containers/containers-quickstart/">Containers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../dsc/">Nework Emulation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../risky-experiment/">Risky Experiments</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="https://binary.deterlab.net/docs">Binary Analysis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../competitions/">Competitions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../orchestrator/">Orchestrator</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../dash/">Human user emulation</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Sharing</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../sample-topologies/">Sample Topologies</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../sharing/">Shared Materials</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Deterlab for Classes</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/">Education Materials Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/guidelines-for-teachers/">Guidelines for Teachers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/class-support/">Class Support</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/course-setup/">Course Setup</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/good-teaching-practices/">Good Teaching Practices</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/connect-with-teachers/">Connect With Other Teachers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/guidelines-for-students/">Guidelines for Students</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/public-materials/">Public Materials</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Reference</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../deterlab-commands/">DETERLab commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../ns-commands/">NS commands</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Support</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/getting-help/">Getting Help</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/faqs/">FAQs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/usage-policy/">Usage Policy</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">DETERLab Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Running Experiments &raquo;</li>
        
      
    
    <li>Use your nodes</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="interact-with-your-experiment">Interact With Your Experiment<a class="headerlink" href="#interact-with-your-experiment" title="Permanent link"></a></h1>
<p>When interacting with your experiment you may want to <em>access your nodes</em>, <em>transfer files</em>, <em>generate traffic</em>, <em>collect statistics</em>, or <em>modify your experiment</em>. Sections below provide more information about each of these needs.</p>
<h2 id="modes-of-use">Modes of use<a class="headerlink" href="#modes-of-use" title="Permanent link"></a></h2>
<p>There are several ways in which you can use your nodes:</p>
<ol>
<li>
<p><strong>Manual</strong>: As you start developing your experiment, you may want to SSH to your experiment and configure nodes or generate traffic manually. The rest of this document talks about manual use of your nodes.</p>
</li>
<li>
<p><strong>Automated</strong>: As your work progresses you may want to develop scripts (e.g., using Bash or Python or MAGI or Ansible) to automate running of your experiments. Please see our documentation on <a href="../automate/">automating your experiments</a>.</p>
</li>
</ol>
<h2 id="experiment-realization">Experiment Realization<a class="headerlink" href="#experiment-realization" title="Permanent link"></a></h2>
<p>Imagine an experiment with three nodes A, B, and C where A is connected to B and B to C. Figure below shows the <em>actual</em> connections within the testbed.</p>
<p><img alt="" src="../../img/curtain.png" /></p>
<p>Each node is connected to two switches - a control switch, which is used to reach into the node from the Internet, and an experimental switch, which is used to create the physical connections between nodes in the same experiment. To connect A to B and B to C, some network interfaces (NICs) connecting to the experimental switch will be configured (see yellow dots denoting these NICs).</p>
<p>When a node becomes part of an experiment (in a given project), it gets
at least two <em>names</em>: a <em>short</em> name like <code>A</code>, and a <em>long</em> name like <code>A.test.Share</code>. The long name is formed by putting together node name, experiment name and project name, separated by dots.</p>
<p>In the figure above you can see that the short name is the name that relates to the node's connections to the experimental switch, and the long name relates to connections to the control switch.</p>
<p>Imagine that you have opened a terminal window connected to node A. If you type</p>
<pre><code>    ping C.test.Share
</code></pre>
<p>this traffic will reach the node following the black dotted line on the left, going through the control switch. If you type</p>
<pre><code>    ping C
</code></pre>
<p>this traffic will reach the node following the black dotted line on the right, going through the experimental switch. More importantly, this traffic will go from A to B and then to C, just like you specified in your topology -- the only way to reach C from A is to go over B.</p>
<h2 id="access-your-nodes">Access your nodes<a class="headerlink" href="#access-your-nodes" title="Permanent link"></a></h2>
<p>You can access your expreriment through use of SSH and terminal. Please see our <a href="../DETERSSH/">advanced guide to SSH</a> for some advanced topics. This section provides a basic reference.</p>
<p>First SSH into <code>users.deterlab.net</code> using your DETERLab username and password. See the figure above (red dashed lines). Since DETERLab nodes are not directly connected to the Internet you need to SSH into them by first going through <code>users</code> and then from <code>users</code> into your experiment.</p>
<p>Once you log in to <code>users</code>, you'll need to SSH again to your actual experimental nodes using <em>long</em> node names, which look like this: <code>nodeName.experimentName.projectName</code>. You will not need to re-authenticate.</p>
<p>For example, imagine that you have swapped in <code>test</code> experiment under project <code>Share</code> and that your username is <code>YourUsername</code>. Imagine that you want to access node <code>A</code>. You would type the following in your terminal window on your device:</p>
<pre><code>    ssh YourUsername@users.deterlab.net
    ssh A.test.Share
</code></pre>
<p>If you have just started your experiment you may need to wait a few minutes before you can successfully SSH into experimental nodes, because nodes may not be fully set up.</p>
<p>If you happen to terminate the SSH process on your node, or if you set up a firewall rule that blocks SSH traffic, another way to access your node is via <a href="../serial-console/">serial console</a>.</p>
<h3 id="shared-filesystem">Shared Filesystem<a class="headerlink" href="#shared-filesystem" title="Permanent link"></a></h3>
<p>On DETERLab there are two folders that are mounted over the NFS (network file system) on each node. This includes <code>users.deterlab.net</code> and any experimental node that a user allocates. One folder is <code>/users/YourUsername</code> or your home folder. <em>This is why you can create a file on one experimental node in your home folder and it becomes visible in another experimental node in that same folder</em>. The second folder is <code>/users/YourProject</code> where "YourProject" is the project that you are a member of, and that you created your experiment in. That second folder is accessible not only by the user but by all users that are members of that same project (e.g., all students in a class).</p>
<h3 id="transfer-files">Transfer Files<a class="headerlink" href="#transfer-files" title="Permanent link"></a></h3>
<p>You can transfer files between your device and your DETERLab experiment by using the <em>scp</em> command from the command line. The command has colon (:) and dot (.) characters in certain places. Make sure to type them as is shown in the examples. Our <a href="../DETERSSH">guide to SSH</a> provides more details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Home folders on DETERLab are mounted remotely. This means that you can place a file in the home folder on one experimental node or on users.deterlab.net and it will be there when you log into a different node.</p>
</div>
<p>Assume that you want to transfer file "myfile.txt" between your device and one of your experimental nodes (e.g., <em>A.test.Share</em>).</p>
<h4 id="from-your-device-to-deterlab-home-directory">From your device to DETERLab home directory<a class="headerlink" href="#from-your-device-to-deterlab-home-directory" title="Permanent link"></a></h4>
<p><em>On your device</em> open a terminal window, navigate to the folder with the file "myfile.txt" and type the commands below:</p>
<pre><code>    scp myfile.txt YourUsername@users.deterlab.net:.
</code></pre>
<p>This will place the file into your home folder on DETERLab. This folder is your home folder on any experimental machine as well (see <a href="../behind/">Behind the scenes</a>), and myfile.txt will be on node <em>A.test.Share</em> as well.</p>
<h4 id="from-deterlab-home-directory-to-your-device">From DETERLab home directory to your device<a class="headerlink" href="#from-deterlab-home-directory-to-your-device" title="Permanent link"></a></h4>
<p>Assume that you want to transfer file "myfile.txt" from your home folder on DETERLab to your device.</p>
<p><em>On your device</em> open a terminal window, navigate to the folder where you want to store the file and type the commands below:</p>
<pre><code>    scp YourUsername@users.deterlab.net:myfile.txt .
</code></pre>
<h4 id="from-your-device-to-deterlab-local-folder-on-experimental-node">From your device to DETERLab local folder on experimental node<a class="headerlink" href="#from-your-device-to-deterlab-local-folder-on-experimental-node" title="Permanent link"></a></h4>
<p>Assume that you want to transfer file "myfile.txt" from your device to folder "/tmp" on node A.test.Share. You first have to move the file to your DETERLab home folder and then move it to the local node folder.</p>
<p><em>On your device</em> open a terminal window, navigate to the folder where you want to store the file and type the commands below:</p>
<pre><code>        scp YourUsername@users.deterlab.net:myfile.txt .
</code></pre>
<p>SSH to <em>users.deterlab.net</em> and then to <em>A.test.Share</em> and then type:</p>
<pre><code>    cp ~/myfile.txt /tmp/myfile.txt
</code></pre>
<h4 id="from-deterlab-local-folder-on-experimental-node-to-your-device">From DETERLab local folder on experimental node to your device<a class="headerlink" href="#from-deterlab-local-folder-on-experimental-node-to-your-device" title="Permanent link"></a></h4>
<p>Assume that you want to transfer file "myfile.txt" from folder "/tmp" on node A.test.Share to your device. Since this file is <em>not</em> in your home directory you have to move it there first. </p>
<p>SSH to <em>users.deterlab.net</em> and then to <em>A.test.Share</em> and then type:</p>
<pre><code>    cp /tmp/myfile.txt ~/myfile.txt
</code></pre>
<p>Then <em>on your device</em>  open a terminal window, navigate to the folder where you want to store the file and type the commands below:</p>
<pre><code>        scp YourUsername@users.deterlab.net:myfile.txt .
</code></pre>
<h2 id="mount-more-disk-space">Mount More Disk Space<a class="headerlink" href="#mount-more-disk-space" title="Permanent link"></a></h2>
<p>DETERLab nodes come with a modest amount of disk space. You can mount more disk space by typing the following instructions on your experimental node:</p>
<pre><code>    sudo mkdir /mnt/local
    sudo /usr/local/etc/emulab/mkextrafs /mnt/local
    user=`whoami`
    sudo chown $user /mnt/local
</code></pre>
<h2 id="install-software">Install Software<a class="headerlink" href="#install-software" title="Permanent link"></a></h2>
<p>To contain malicious traffic within experiments, DETERLab has no connectivity to the outside world. To install packages please use our mirrors of popular content:</p>
<ul>
<li>Install Ubuntu packages by typing</li>
</ul>
<pre><code>    sudo apt install [package name]
</code></pre>
<ul>
<li>Install Python packages by typing</li>
</ul>
<pre><code>    pip install -i https://fbsd-build.isi.deterlab.net/pypi/web/simple [package name]
</code></pre>
<ul>
<li>Install software from source by: (1) downloading the software into your home directory by typing on <code>users.deterlab.net</code> the following <code>wget [software URL]</code>, then (2) in your experiment access the software you downloaded in your home directory, extract it and follow install instructions</li>
</ul>
<p>If you have any other installation needs that are not met with the above instructions please file a ticket.</p>
<h2 id="generate-traffic">Generate Traffic<a class="headerlink" href="#generate-traffic" title="Permanent link"></a></h2>
<p>You can generate traffic in your experiment in many ways. At first, as you are designing your experiment, you may want generate traffic <a href="../../traffic/manual/">manually and interactively</a>. Later, you may want to <a href="../automate/">write scripts</a> for traffic generation. You may also want to <a href="../../dash/">emulate human actions</a> in your experiments.</p>
<h2 id="collect-statistics">Collect Statistics<a class="headerlink" href="#collect-statistics" title="Permanent link"></a></h2>
<p>For any statistics you collect, please store them locally on the experimental nodes, and not in your home directory. This will minimize traffic on the shared testbed infrastructure.</p>
<p>If you are testing some custom system you wrote, you can log events locally, e.g., in the /tmp directory of the experimental nodes. You may also want to collect traffic traces, e.g., by using <em>tcpdump</em>. Please store them locally on the nodes as well. If you need more space to store your data please see <a href="../storage/">our extended storage options</a>.</p>
<h2 id="modify-experiment">Modify Experiment<a class="headerlink" href="#modify-experiment" title="Permanent link"></a></h2>
<p>You can modify your experiment's topology by clicking on the experiment's name in "My Deterlab" view and then clicking on "Modify Experiment" on the left menu. This is best done when the experiment is not currently swapped in. You can also modify the experiment's <em>settings</em> such as idle swap and maximum duration if you click on the "Modify Settings" on the left menu.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../swapout/" class="btn btn-neutral float-right" title="Swap out or terminate">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../swapin/" class="btn btn-neutral" title="Swap in an experiment"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2018 <a href="https://www.deter-project.org/">DETER Project</a>.</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../swapin/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../swapout/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
  <script>var base_url = '../..';</script>
  <script src="../../js/theme.js"></script>
    <script src="../../search/main.js"></script>
  <!-- this makes the active part of the navigation sidebar scroll to top -->
<script type="text/javascript">
$(document).ready(function () {

  if ($("a").hasClass("current")) {
    var container = $("nav"),
    scrollTo = $("a.current");

    container.scrollTop(
    scrollTo.offset().top - container.offset().top + container.scrollTop() - 92
    );
    
    }
});
</script>

</body>
</html>
