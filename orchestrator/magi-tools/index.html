<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>MAGI Tools - DETERLab Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../css/extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "MAGI Tools";
    var mkdocs_page_input_path = "orchestrator/magi-tools.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
    <a href="" class="icon">
      <!--REPLACE LOGO FILE HERE -->
      <img class="logo" style="float:left" src="/img/doc-logo.png"/> 
      <span class="title">DETERLab Documentation</span></a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search documentation" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Welcome to the DETERLab Documentation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../Glossary/">Glossary</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Support</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/registering/">Registering with DETERLab</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/getting-help/">Getting Help</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/faqs/">FAQs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/passwords/">Passwords</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/usage-policy/">Usage Policy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/elab-elab-ssh-proxy/">Configuring E-lab in E-lab</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">DETERLab Core</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/core-quickstart/">Core Quickstart</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/core-guide/">Core Guide</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/sample-topologies/">Sample Topologies</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/using-nodes/">Using Your Nodes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/generating-traffic/">Generating Traffic</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/link-delays/">End Node Traffic Shaping</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/risky-experiment/">Risky Experiments</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/sharing/">Using Shared Materials</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/user-guidelines/">User Do's and Don'ts</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Core Reference</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/deterlab-commands/">DETERLab Commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/ns-commands/">NS Commands Extensions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/swapping/">Understanding Swapping (Node Use Policies)</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/DETERSSH/">Accessing testbeds using SSH</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/node-types/">DETERLab Node Types</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/serial-console/">Using the Serial Console</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/dell-serial-console/">Dell Serial Console</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/os-images/">OS Images</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/custom-images/">Creating Custom Images</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/windows/">Windows XP</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/legacy-tools/">Legacy Tools</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Orchestrator</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../orchestrator-quickstart/">Orchestrator Quickstart</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../orchestrator-guide/">Orchestrator Guide</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../orchestrator-case-studies/">Orchestrator Case Studies</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../simple-client-server/">Simple Client Server Case Study</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../scaled-client-server/">Scaled Client Server Case Study</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../feedback/">Feedback Case Study</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../flooder/">Flooder Case Study</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../writing-agents/">Specialized User</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../data-management/">Orchestrator Data Management</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../orchestrator-config/">MAGI Configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../orchestrator-reference/">Orchestrator Reference</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../system-files/">MAGI System Organization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../agent-library/">MAGI Agent Library</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">MAGI Tools</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#magi_statuspy-check-status-of-a-magi-experiment-reboot-magi-daemon-download-logs">magi_status.py: Check status of a MAGI experiment, reboot MAGI daemon, download logs</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#magi_graphpy-create-graphs-for-a-magi-experiment">magi_graph.py: Create graphs for a MAGI experiment</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../magi-dev/">MAGI Development Codebase</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../magi-desktop/">MAGI Desktop</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Containers</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../containers/containers-quickstart/">Containers Quickstart</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../containers/containers-guide/">Containers Guide</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../containers/containers-reference/">Containers Reference</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">DeterLab Tools</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools Index</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/internet-atlas/">Internet Atlas</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Other Features</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../federation/">Federation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../abac/">ABAC</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../competitions/">Competitions</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Education Materials</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/">Education Materials Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/guidelines-for-teachers/">Guidelines for Teachers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/class-support/">Class Support</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/course-setup/">Course Setup</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/good-teaching-practices/">Good Teaching Practices</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/connect-with-teachers/">Connect With Other Teachers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/guidelines-for-students/">Guidelines for Students</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/student-intro/">Student Introduction to DETERLab</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/public-materials/">Public Materials</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Miscellaneous</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../ISIUCB/">DETERLab Rooms</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">DETERLab Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Orchestrator &raquo;</li>
        
      
    
    <li>MAGI Tools</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="magi-tools">MAGI Tools<a class="headerlink" href="#magi-tools" title="Permanent link"></a></h1>
<p>The following tools are available for MAGI experiments in DETERLab:</p>
<ul>
  <li><a href="#magi_status.py">magi_status.py</a></li>
  <li><a href="#magi_graph.py">magi_graph.py</a></li>

</ul>

<h2 id="magi_statuspy-check-status-of-a-magi-experiment-reboot-magi-daemon-download-logs"><a id="magi_status.py"></a><code>magi_status.py</code>: Check status of a MAGI experiment, reboot MAGI daemon, download logs<a class="headerlink" href="#magi_statuspy-check-status-of-a-magi-experiment-reboot-magi-daemon-download-logs" title="Permanent link"></a></h2>
<p>Use <code>magi_status.py</code> to:</p>
<ul>
<li>check MAGI’s status on experiment nodes</li>
<li>reboot MAGI daemon process</li>
<li>download logs from experiment nodes</li>
</ul>
<p>This tool is run for one experiment at a time. The user needs to provide the project name and the experiment name to the tool.</p>
<p>This tool, by default, works for all of the nodes corresponding to the given experiment. However, it can be made to work with a restricted set of nodes, either by directly providing the set of interested nodes, or by providing an AAL (experiment procedure) file to fetch the set of desired nodes.</p>
<p>This tool by default only informs if the MAGI daemon process on a node is reachable or not. Specific options can be used to fetch group membership details and information about active agents.</p>
<p>If you want to reboot the MAGI daemon, <code>magi_status.py</code> first reboots MAGI daemon processes on the experiment nodes, and then fetches their status.</p>
<p>If the tool is asked to download logs, it just does that, and does not fetch the status.</p>
<pre><code>  Usage: magi_status.py [options]

  Script to get the status of MAGI daemon processes on experiment nodes,
  to reboot them if required, and to download logs.

  Options:
    -h, --help            show this help message and exit
    -p PROJECT, --project=PROJECT
                          Project name
    -e EXPERIMENT, --experiment=EXPERIMENT
                          Experiment name
    -n NODES, --nodes=NODES
                          Comma-separated list of the nodes to reboot MAGI
                          daemon
    -a AAL, --aal=AAL     The yaml-based procedure file to extract the list of
                          nodes
    -l, --logs            Fetch logs. The -o/--logoutdir option is applicable
                          only when fetching logs.
    -o LOGOUTDIR, --logoutdir=LOGOUTDIR
                          Store logs under the given directory. Default: /tmp
    -g, --groupmembership
                          Fetch group membership detail
    -i, --agentinfo       Fetch loaded agent information
    -t TIMEOUT, --timeout=TIMEOUT
                          Number of seconds to wait to receive the status reply
                          from the nodes on the overlay
    -r, --reboot          Reboot nodes. The following options are applicable
                          only when rebooting.
    -d DISTPATH, --distpath=DISTPATH
                          Location of the distribution
    -U, --noupdate        Do not update the system before installing MAGI
    -N, --noinstall       Do not install MAGI and the supporting libraries

</code></pre>

<h2 id="magi_graphpy-create-graphs-for-a-magi-experiment"><a id="magi_graph.py"></a><code>magi_graph.py</code>: Create graphs for a MAGI experiment<a class="headerlink" href="#magi_graphpy-create-graphs-for-a-magi-experiment" title="Permanent link"></a></h2>
<p><code>magi_graph.py</code> is a graph generator for experiments executed on DETERLab using MAGI. The tool fetches the required data using MAGI’s data management layer and generates a graph in PNG format. This tool may be executed from either the DETER Ops machine or a remote computer with access to internet. The data to be plotted and other graph features are configurable.</p>
<p>The various commandline options are as follows:</p>
<pre><code>  Usage: magi_graph.py [options]

  Plots the graph for an experiment based on parameters provided.
  Experiment Configuration File OR Project and Experiment Name
  needs to be provided to be able to connect to the experiment.
  Need to provide build a graph specific configuration for plotting.

  Options:
   -h, --help            show this help message and exit
   -e EXPERIMENT, --experiment=EXPERIMENT
                       Experiment name
   -p PROJECT, --project=PROJECT
                       Project name
   -x EXPERIMENTCONFIG, --experimentConfig=EXPERIMENTCONFIG
                       Experiment configuration file
   -c CONFIG, --config=CONFIG
                       Graph configuration file
   -a AGENT, --agent=AGENT
                       Agent name. This is used to fetch available database
                       fields
   -l AAL, --aal=AAL     AAL (experiment procedure) file. This is also used to
                       fetch available database fields
   -o OUTPUT, --output=OUTPUT
                       Output graph file. Default: graph.png
   -t, --tunnel          Tell the tool to tunnel request through Deter Ops
                       (users.deterlab.net).
   -u USERNAME, --username=USERNAME
                       Username for creating tunnel. Required only if
                       different from current shell username.
</code></pre>

<p>This tool expects the user to provide a configuration file. The format of the configuration file needs to be similar to the sample configuration file provided below.</p>
<pre><code>  graph:
     type: line
     xLabel: Time(sec)
     yLabel: Bytes
     title: Traffic plot
  db:
     agent: monitor_agent
     filter:
          host: servernode
          peerNode: clientnode
          trafficDirection: out
     xValue: created
     yValue: bytes
</code></pre>

<p>The configuration is divided into two parts a) Graph options and b) Database options. Graph options are used to configure the type of graph and the various labels. The database options help the tool fetch the data to be plotted.</p>
<p>Each record stored in the database using MAGI’s database layer has the following three fields along with any other that an agent populates.</p>
<pre><code>    agent: Agent Name
    host: Node of which the agent is hosted
    created: Timestamp of when the record is created
</code></pre>

<p>In the above mentioned example, data populated by the agent named “monitor_agent” hosted on the node named “servernode” will be fetched. The data would further be filtered on the configured values of peerNode and trafficDirection, which are agent specific fields.</p>
<p>Among the fetched data, values corresponding to the fields, created and bytes, will be plotted correspoding to the x and the y axis, respectively.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../magi-dev/" class="btn btn-neutral float-right" title="MAGI Development Codebase">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../agent-library/" class="btn btn-neutral" title="MAGI Agent Library"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2018 <a href="https://www.deter-project.org/">DETER Project</a>.</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../agent-library/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../magi-dev/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
  <script>var base_url = '../..';</script>
  <script src="../../js/theme.js"></script>
    <script src="../../search/main.js"></script>
  <!-- this makes the active part of the navigation sidebar scroll to top -->
<script type="text/javascript">
$(document).ready(function () {

  if ($("a").hasClass("current")) {
    var container = $("nav"),
    scrollTo = $("a.current");

    container.scrollTop(
    scrollTo.offset().top - container.offset().top + container.scrollTop() - 92
    );
    
    }
});
</script>

</body>
</html>
