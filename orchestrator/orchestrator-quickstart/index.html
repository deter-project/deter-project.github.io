<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Orchestrator Quickstart - DETERLab Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../css/extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Orchestrator Quickstart";
    var mkdocs_page_input_path = "orchestrator/orchestrator-quickstart.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
    <a href="../.."> <!-- class="icon"-->
      <!--REPLACE LOGO FILE HERE -->
      <img class="logo" style="float:left" src="/img/doc-logo.png"/>DETERLab Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search documentation" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Welcome to the DETERLab Documentation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../Glossary/">Glossary</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Support</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/registering/">Registering with DETERLab</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/getting-help/">Getting Help</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/faqs/">FAQs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/passwords/">Passwords</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/usage-policy/">Usage Policy</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/elab-elab-ssh-proxy/">Configuring E-lab in E-lab</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">DETERLab Core</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/core-quickstart/">Core Quickstart</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/core-guide/">Core Guide</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/sample-topologies/">Sample Topologies</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/using-nodes/">Using Your Nodes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/generating-traffic/">Generating Traffic</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/link-delays/">End Node Traffic Shaping</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/risky-experiment/">Risky Experiments</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/sharing/">Using Shared Materials</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/user-guidelines/">User Do's and Don'ts</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Core Reference</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/deterlab-commands/">DETERLab Commands</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/ns-commands/">NS Commands Extensions</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/swapping/">Understanding Swapping (Node Use Policies)</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/DETERSSH/">Accessing testbeds using SSH</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/node-types/">DETERLab Node Types</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/serial-console/">Using the Serial Console</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/dell-serial-console/">Dell Serial Console</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/os-images/">OS Images</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/custom-images/">Creating Custom Images</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/windows/">Windows XP</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../core/legacy-tools/">Legacy Tools</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Orchestrator</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Orchestrator Quickstart</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#what-is-the-magi-orchestrator">What is the MAGI Orchestrator?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-does-it-work">How does it work?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-do-i-use-the-orchestrator">How do I use the Orchestrator?</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-include-a-special-start-command-in-your-topology">1. Include a special start command in your topology</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-write-the-aal-file-that-describes-the-experiments-workflows">2. Write the AAL file that describes the experiment's workflows</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-run-the-magi_orchestratorpy-tool-on-a-physical-experiment-in-deterlab">3. Run the magi_orchestrator.py tool on a physical experiment in DETERLab</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4-view-results-by-accessing-nodes-modify-the-experiment-as-needed">4. View results by accessing nodes, modify the experiment as needed.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#5-save-your-work-and-swap-out-your-experiment-release-the-resources">5. Save your work and swap out your experiment (release the resources)</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#more-information">More Information</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../orchestrator-guide/">Orchestrator Guide</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../orchestrator-case-studies/">Orchestrator Case Studies</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../simple-client-server/">Simple Client Server Case Study</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../scaled-client-server/">Scaled Client Server Case Study</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../feedback/">Feedback Case Study</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../flooder/">Flooder Case Study</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../writing-agents/">Specialized User</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../data-management/">Orchestrator Data Management</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../orchestrator-config/">MAGI Configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../orchestrator-reference/">Orchestrator Reference</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../system-files/">MAGI System Organization</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../agent-library/">MAGI Agent Library</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../magi-tools/">MAGI Tools</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../magi-dev/">MAGI Development Codebase</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../magi-desktop/">MAGI Desktop</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Containers</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../containers/containers-quickstart/">Containers Quickstart</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../containers/containers-guide/">Containers Guide</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../containers/containers-reference/">Containers Reference</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">DeterLab Tools</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/">Tools Index</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tools/internet-atlas/">Internet Atlas</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Other Features</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../federation/">Federation</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../abac/">ABAC</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../competitions/">Competitions</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Education Materials</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/">Education Materials Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/guidelines-for-teachers/">Guidelines for Teachers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/class-support/">Class Support</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/course-setup/">Course Setup</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/good-teaching-practices/">Good Teaching Practices</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/connect-with-teachers/">Connect With Other Teachers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/guidelines-for-students/">Guidelines for Students</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/student-intro/">Student Introduction to DETERLab</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../education/public-materials/">Public Materials</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Miscellaneous</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../ISIUCB/">DETERLab Rooms</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">DETERLab Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Orchestrator &raquo;</li>
        
      
    
    <li>Orchestrator Quickstart</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="orchestrator-quickstart">Orchestrator Quickstart<a class="headerlink" href="#orchestrator-quickstart" title="Permanent link">&para;</a></h1>
<p>This page describes basic information about the MAGI Orchestrator and provides a high-level overview of how to use it. More details are available in the <a href="/orchestrator/orchestrator-guide/">Orchestrator Guide</a>.</p>
<h2 id="what-is-the-magi-orchestrator">What is the MAGI Orchestrator?<a class="headerlink" href="#what-is-the-magi-orchestrator" title="Permanent link">&para;</a></h2>
<p>MAGI allows you to automate and manage the procedures of a DETERLab experiment which is very useful for highly complex experiments. It's essentially a workflow management system for DETERLab that provides deterministic control and orchestration over event streams, repeatable enactment of procedures and control and data management for experiments.</p>
<p>MAGI replaces the SEER experimentation framework and is part of the DETER experiment lifecycle management tools.</p>
<h2 id="how-does-it-work">How does it work?<a class="headerlink" href="#how-does-it-work" title="Permanent link">&para;</a></h2>
<p>The procedure for a MAGI experiment is expressed in a YAML-based Agent Activation Language (AAL) file. The MAGI Orchestrator tool parses the procedure AAL file and maintains experiment-wide state to execute the procedure. The Orchestrator then sends and receives events from agents on the experiment nodes and enforces synchronization points -- called as triggers â€” to deterministically execute the procedure. </p>
<h2 id="how-do-i-use-the-orchestrator">How do I use the Orchestrator?<a class="headerlink" href="#how-do-i-use-the-orchestrator" title="Permanent link">&para;</a></h2>
<h3 id="1-include-a-special-start-command-in-your-topology">1. Include a special start command in your topology<a class="headerlink" href="#1-include-a-special-start-command-in-your-topology" title="Permanent link">&para;</a></h3>
<p>Add a special start command in your topology to install MAGI and supporting tools on all nodes at startup. The command will be similar to the following:</p>
<pre><code>tb-set-node-startcmd $NodeName &quot;sudo python /share/magi/current/magi_bootstrap.py&quot;
</code></pre>

<h3 id="2-write-the-aal-file-that-describes-the-experiments-workflows">2. Write the AAL file that describes the experiment's workflows<a class="headerlink" href="#2-write-the-aal-file-that-describes-the-experiments-workflows" title="Permanent link">&para;</a></h3>
<p>Describe the experiment procedure (ie, workflow) in a YAML-based AAL (.aal) file that describes:</p>
<ul>
<li>groups - one or more nodes of with similar behavior. </li>
<li>agents - sets of behaviors </li>
<li>event streams - list of events and triggers that make up a procedure.</li>
<li>events - invoke a procedure implemented in an agent</li>
<li>triggers - synchronization mechanism based on events or time.</li>
</ul>
<p>The following is an example of an event in the AAL file:</p>
<pre><code>- type: event
  agent: server_agent
  method: startServer
  trigger: serverStartedSuccessfully
  args: {}
</code></pre>

<p>You'll find more detailed information about writing the AAL file in the <a href="/orchestrator/orchestrator-guide/">Orchestrator Guide</a>.</p>
<h3 id="3-run-the-magi_orchestratorpy-tool-on-a-physical-experiment-in-deterlab">3. Run the <code>magi_orchestrator.py</code> tool on a physical experiment in DETERLab<a class="headerlink" href="#3-run-the-magi_orchestratorpy-tool-on-a-physical-experiment-in-deterlab" title="Permanent link">&para;</a></h3>
<p>Similar to <a href="/containers/containers-quickstart/">Containers</a>, you run the Orchestrator tool in conjunction with a swapped-in physical experiment in DETERLab. <code>magi_orchestrator.py</code> reads the procedure's AAL file and orchestrates an experiment based on the specified procedures.</p>
<p>You would run a command similar to the following on <code>users</code>:</p>
<pre><code>/share/magi/current/magi_orchestrator.py --control clientnode.myExp.myProj --events procedure.aal
</code></pre>

<h3 id="4-view-results-by-accessing-nodes-modify-the-experiment-as-needed">4. View results by accessing nodes, modify the experiment as needed.<a class="headerlink" href="#4-view-results-by-accessing-nodes-modify-the-experiment-as-needed" title="Permanent link">&para;</a></h3>
<p>In an orchestrated experiment, you can access the virtual nodes with the same directories mounted as in a Core DETERLab experiment. You can load and run software and conduct experiments as you would in a Core experiment. </p>
<h3 id="5-save-your-work-and-swap-out-your-experiment-release-the-resources">5. Save your work and swap out your experiment (release the resources)<a class="headerlink" href="#5-save-your-work-and-swap-out-your-experiment-release-the-resources" title="Permanent link">&para;</a></h3>
<p>As with all DETERLab experiment, when you are ready to stop working on an experiment but know you want to work on it again, save your files in specific protected directories and swap-out (via web interface or commandline) to release resources back to the testbed. This helps ensure there are enough resources for all DETERLab users.</p>
<h2 id="more-information">More Information<a class="headerlink" href="#more-information" title="Permanent link">&para;</a></h2>
<p>For more detailed information about the Orchestrator, read the following:</p>
<ul>
<li><a href="/orchestrator/orchestrator-guide/">Orchestrator Guide</a> - This guide walks you through a basic example of using the Orchestrator and includes some advanced topics.</li>
<li><a href="/orchestrator/orchestrator-case-studies/">Orchestrator Case Studies</a> - Includes details of real-world examples of using Orchestrator.</li>
<li><a href="/orchestrator/orchestrator-reference/">Orchestrator Reference</a> - This reference includes commands, configuration details and logs.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../orchestrator-guide/" class="btn btn-neutral float-right" title="Orchestrator Guide">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../core/legacy-tools/" class="btn btn-neutral" title="Legacy Tools"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2018 <a href="https://www.deter-project.org/">DETER Project</a>.</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../core/legacy-tools/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../orchestrator-guide/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
  <script>var base_url = '../..';</script>
  <script src="../../js/theme.js"></script>
    <script src="../../search/main.js"></script>
  <!-- this makes the active part of the navigation sidebar scroll to top -->
<script type="text/javascript">
$(document).ready(function () {

  if ($("a").hasClass("current")) {
    var container = $("nav"),
    scrollTo = $("a.current");

    container.scrollTop(
    scrollTo.offset().top - container.offset().top + container.scrollTop() - 92
    );
    
    }
});
</script>

</body>
</html>
